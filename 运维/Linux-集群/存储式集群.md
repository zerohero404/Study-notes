# 1.集群化存储概述
## 1.1 用于存储的网络技术
- DAS Direct-Attached Storage<br>
&ensp;&ensp;说明：直接附加存储，等同于存储设备通过数据线、光缆、SATA 直连主机<br>
&ensp;&ensp;优点:技术简单、传输效率最高<br>
&ensp;&ensp;缺点:存储设备与主机相互绑定，不利于后期扩展与共享<br>
-NAS (Network Attached Storage)<br>
&ensp;&ensp;说明：网络附加存储，通过网络在存储主机与使用主机之间传输数据<br>
&ensp;&ensp;优点:技术相对简单、不要求存储设备直连本机，只需在局域网下即可<br>
&ensp;&ensp;缺点:存储速率较慢<br>
&ensp;&ensp;网络拓扑<br>
 <img width="428" height="390" alt="Linux：集群_31" src="https://github.com/user-attachments/assets/2f39aff1-d4f8-48e0-8f5f-51b0ea362a78" /><br>
- SAN (Storage Area Network)<br>
&ensp;&ensp;说明：存储区域网络，将生产网络与存储网络进行隔离，有效增加各部效率，减轻网络设备压力，适合大并发业务<br>
&ensp;&ensp;优点:存储安全性较高、存储速率较高<br>
&ensp;&ensp;缺点:造价昂贵、技术难度相对较高<br>
&ensp;&ensp;网络拓扑<br>
 <img width="638" height="478" alt="Linux：集群_32" src="https://github.com/user-attachments/assets/affab867-672d-4a19-8903-a3bb508389f4" /><br>
## 1.2 实现存储的技术分类
- 块存储<br>
&ensp;&ensp;常见设备:<br>
 <img width="326" height="341" alt="Linux：集群_33" src="https://github.com/user-attachments/assets/51b91231-7e45-4875-a190-588113c02226" /><br>
&ensp;&ensp;优点:可用通过 Raid、LVM 等简单技术实现高可用、可独立使用<br>
&ensp;&ensp;缺点:不利于在多台网络设备之间进行共享<br>
- 文件存储、网络存储<br>
&ensp;&ensp;常见方法:SAMBA、NFS<br>
&ensp;&ensp;优点:构建资金低、可在不同主机之间共享存储<br>
&ensp;&ensp;缺点:读写效率低，传输效率慢<br>
- 对象存储、分布式存储、存储桶<br>
&ensp;&ensp;常见设备:
 <img width="494" height="589" alt="Linux：集群_34" src="https://github.com/user-attachments/assets/4e3baf51-2357-43d8-8cd2-da8317a4dbdb" /><br>
&ensp;&ensp;优点:读写效率高、可在不同主机之间共享存储<br>
&ensp;&ensp;缺点:造价昂贵，技术实现难度较高<br>
- 常见的一些存储名词以及背后使用技术对应关系<br>
&ensp;&ensp;文件存储、网络存储  FTPSAMBA、Apache、Nginx<br>
&ensp;&ensp;对象存储、分布式存储、云存储  CEPH、MooseFS、RHCS、ClusterFS<br>
&ensp;&ensp;块存储  ISCSI<br>
## 1.3 存储实现技术与存储网络之间的联系
- 块存储 + DAS<br>
&ensp;&ensp;结构描述：块存储直连主机设备是最常见的存储方式，也是后边所有存储方式的基石<br>
&ensp;&ensp;结构拓扑:<br>
 <img width="672" height="464" alt="Linux：集群_35" src="https://github.com/user-attachments/assets/88e6c22a-9a5e-46b0-912d-158e8ca76e1e" /><br>
- 块存储 + NAS<br>
&ensp;&ensp;结构描述：将块设备通过局域网络共享至其它使用主机节点，提升空间利用率，便于后期扩展<br>
&ensp;&ensp;结构拓扑:<br>
 <img width="531" height="271" alt="Linux：集群_36" src="https://github.com/user-attachments/assets/1acc23e0-8959-49aa-9be6-89cc1818c22d" /><br>
- 块存储 + SAN<br>
&ensp;&ensp;结构描述：将块设备通过局域网络共享至其它使用主机节点，提升空间利用率。并且将用户访问网络与存储网络相隔离，利用提升存储效率以后后期维护扩展<br>
&ensp;&ensp;结构拓扑<br>
 <img width="713" height="453" alt="Linux：集群_37" src="https://github.com/user-attachments/assets/a564eb18-1f75-49f3-9e1b-b695fb2dc711" /><br>
- 文件存储 + NAS<br>
&ensp;&ensp;结构描述：利用共享服务将文件通过网络传输至使用设备，便于文件在多台机器之间的共享操作<br>
&ensp;&ensp;结构拓扑<br>
 <img width="680" height="398" alt="Linux：集群_38" src="https://github.com/user-attachments/assets/ef4a7eb3-3345-4e85-8fcb-1f701a991c1b" /><br>
- 对象存储 + SAN<br>
&ensp;&ensp;结构描述：利用分布式文件存储结构提升文件读写并发效率，并且将用户访问网络与存储网络相隔离， 利用提升存储效率以后后期维护扩展<br>
&ensp;&ensp;结构拓扑<br>
 <img width="767" height="399" alt="Linux：集群_39" src="https://github.com/user-attachments/assets/490e88c4-e596-4f68-b424-d81ed66517fa" /><br>

# 2. 文件存储 – NFS
## 2.1 NFS 概述
- 什么是 NFS ？<br>
&ensp;&ensp;NFS（Network File System）即网络文件系统，是 FreeBSD 支持的文件系统中的一种，它允许网络中的计算机之间通过TCP/IP 网络共享资源。在 NFS 的应用中，本地 NFS 的客户端应用可以透明地读写位于远端NFS 服务器上的文件，就像访问本地文件一样。NFS 最早是由Sun 公司发展出来的，后被逐渐完整以及整合至 Linux 内核<br>
- NFS 功能<br>
&ensp;&ensp;它就是是可以透过网络，让不同的主机、不同的操作系统可以共享存储<br>
- NFS 原理<br>
&ensp;&ensp;NFS 在文件传送或信息传送过程中依赖于 RPC 协议。远程过程调用 (Remote Procedure Call) 是能使客户端执行其他系统中程序的一种机制所以只要用到 NFS 的地方都要启动 RPC 服务，不论是 NFS SERVER 或者 NFS CLIENT 。这样 SERVER 和 CLIENT 才能通过 RPC 来实现 PROGRAM PORT的 对应。可以这么理解 RPC 和 NFS 的关系：NFS 是一个文件系统，而 RPC  是负责负责信息的传输<br>
- NFS 优点<br>
&ensp;&ensp;节省本地存储空间，将常用的数据存放在一台 NFS  服务器上且可以通过网络访问，那么本地终端将可以减少自身存储空间的使用<br>
&ensp;&ensp;用户不需要在网络中的每个机器上都建有 Home 目录，Home 目录可以放在 NFS 服务器上且可以在网络上被访问使用<br>
&ensp;&ensp;一些存储设备 CDROM 和 Zip 等都可以在网络上被别的机器使用。这可以减少整个网络上可移动介质设备的数量<br>
## 2.2 NFS 配置
- NFC 服务器
&ensp;&ensp;yum –y install rpcbind nfs-utils # 服务器端安装 rpcbind 和 NFS-utils 软件包
&ensp;&ensp;/etc/init.d/rpcbind status
&ensp;&ensp;先创建 /file/nfs-1 /file/nfs-2 两个文件夹
&ensp;&ensp;chown -R nobody:nobody /file/nfs-1/ /file/nfs-2/
&ensp;&ensp;vim /etc/exports # 里面文件是空白的

```bash
NFS 共享目录 NFS 客户端地址 1(参数 1,参数 2,参数 3……)  客户端地址 2(参数 1,参数 2,参数3……. )
NFS 共享目录 NFS 客户端地址(参数 1,参数 2,参数 3…… )
```
 <img width="380" height="42" alt="Linux：集群_40" src="https://github.com/user-attachments/assets/776e5caa-6e0e-47fd-9ef6-6feaec4f6d18" /><br>
&ensp;&ensp;service rpcbind restart<br>
&ensp;&ensp;service nfs restart<br>
&ensp;&ensp;showmount -e 10.10.10.11（NFC 服务器 IP） # 查看挂载情况<br>
















