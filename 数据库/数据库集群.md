# 1.Mysql 主从备份
- 1.1 首先修改主服务器 /etc/my.cnf 配置文件<br>
&ensp;vim /etc/my.cnf<br>
&ensp;&ensp;添加两条选项，开启二进制日志<br>
&ensp;&ensp;log-bin=mysql-bin # 启用二进制日志<br>
&ensp;&ensp;server-id=24 # 服务器的 id 号<br>
- 1.2 再修改从服务器 /etc/my.cnf 配置文件<br>
&ensp;vim /etc/my.cnf<br>
&ensp;&ensp;添加两条选项，开启二进制日志<br>
&ensp;&ensp;log-bin=mysql-bin # 启用二进制日志<br>
&ensp;&ensp;server-id=23 # 服务器的 id 号
 <img width="866" height="373" alt="Linux：网络服务_59" src="https://github.com/user-attachments/assets/3868f7ca-f69f-484a-b95c-dca4057775bd" /><br>
- 1.3 登录主服务器的 mysql 数据库
&ensp;mysql -uroot -p
&ensp;在主服务器上授权
```bash
mysql>grant replication slave on *.* to asd(登录的用户名)@’192.168.64.23(从服务器的 IP 地址)’ identified by ‘123456(密码)’;
```
 <img width="661" height="135" alt="Linux：网络服务_60" src="https://github.com/user-attachments/assets/f8cae1c9-c881-4235-8aca-fa2241988ea2" /><br>

- 1.4 mysql>show master status; # 查看日志文件名和大小<br>
 <img width="392" height="130" alt="Linux：网络服务_61" src="https://github.com/user-attachments/assets/eed2481d-efb8-48ee-a856-fcbd3230ac6b" />

- 1.5 登录从服务器的 mysql 数据库<br>
&ensp;mysql -uroot -p<br>
&ensp;在从服务器保存授权的信息<br>
```bash
mysql>change master to master_user=’asd(主服务器授权的用户名)’,master_password=’123456(主服务器授权的密码)’,master_host=’192.168.64.24(主服务器的 IP 地址)’,master_log_file=’mysql-bin.000003(主服务器日志文件名)’,master_log_pos=257(主服务器日志文件大小);
```
 <img width="323" height="131" alt="Linux：网络服务_62" src="https://github.com/user-attachments/assets/8a3d2156-90c7-4cf7-807e-cc0d6f11bbce" /><br>
- 1.6 开启主从备份<br>
&ensp;mysql>start slave;<br>
&ensp;查看是否开启<br>
&ensp;show slave status\G;<br>
 <img width="692" height="423" alt="Linux：网络服务_63" src="https://github.com/user-attachments/assets/b2b15a52-702c-4188-805d-a7ae2948d042" /><br>
- 1.7 测试
 <img width="1188" height="397" alt="Linux：网络服务_64" src="https://github.com/user-attachments/assets/6f207d3c-fb78-46a9-84c7-0c64ef5a9af7" />
 <img width="1152" height="304" alt="Linux：网络服务_65" src="https://github.com/user-attachments/assets/6777e1fb-0c06-411d-a945-2d69e2c5e064" />

- 1.8 授权信息内容文件路径<br>
&ensp;/var/lib/mysql/master.info<br>
 <img width="684" height="556" alt="Linux：网络服务_66" src="https://github.com/user-attachments/assets/8cd3f22e-3560-42ac-84c0-f2c7245f1c8b" />


# 2.主主备份
- 2.1 先把数据库服务给停掉<br>
- 2.2 先以服务器 1 为主，服务器 2 为从配置一遍修改服务器 1 的配置文件<br>
&ensp;vim /etc/my.cnf<br>
 <img width="622" height="432" alt="Linux：网络服务_67" src="https://github.com/user-attachments/assets/9f394cce-2594-4869-94bc-1750409e0783" /><br>
- 2.3 再在服务器 2 的做同样的配置<br>
 <img width="1334" height="449" alt="Linux：网络服务_68" src="https://github.com/user-attachments/assets/eea3368b-be20-4566-980c-93d25432af38" /><br>
- 2.4 启动数据库服务<br>
 <img width="610" height="120" alt="Linux：网络服务_69" src="https://github.com/user-attachments/assets/074ada29-b61c-4d70-97b6-612fd1650d49" /><br>
- 2.5 在服务器 1 上授权

```bash
mysql -uroot -p
mysql>grant replication slave on *.* to asd(登录的用户名)@’192.168.64.23(服务器 2 的 IP 地址)’ identified by ‘123456(密码)’;
```
 <img width="647" height="177" alt="Linux：网络服务_70" src="https://github.com/user-attachments/assets/6b1fd051-660c-4721-92db-116457c3ee6a" /><br>

&ensp;输入show master status;  查看日志文件名称和大小<br>

- 2.6 再在服务器 2 上保存授权信息

```bash
mysql -uroot -p
mysql>change master to master_user=’asd(主服务器授权的用户名)’,master_password=’123456(主服务器授权的密码)’,master_host=’192.168.64.24(主服务器的 IP 地址)’,master_log_file=’mysql-bin.000003(主服务器日志文件名)’,master_log_pos=106(主服务器日志文件大小);
```
- 2.7 开启主从备份(在两台机器上都要执行命令)
&ensp;mysql>start slave;
